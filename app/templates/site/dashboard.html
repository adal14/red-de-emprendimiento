{% extends 'base.html' %}	

{% load staticfiles %}

{% block extra_css %}
	<link href="{% static 'table/bootstrap-table.css' %}" rel="stylesheet">
    <link href="{% static 'datepicker/datepicker3.css' %}" rel="stylesheet">
{% endblock extra_css %}			


{% block extra_js %}
    <script src="{% static 'table/bootstrap-table.js' %}"></script>
    <script src="{% static 'table/locale/bootstrap-table-es-AR.js' %}"></script>
    <script src="{% static 'datepicker/bootstrap-datepicker.js' %}"></script>
{% endblock extra_js %}


{% block content %}
<script type="text/javascript">
    $(document).ready(function(){
        $("#id_categories").tagit({
    	availableTags: ["Cultura", "Aprendizaje", "financiamiento", "escalamiento"],
    	autocomplete: {delay: 0, minLength: 2},
		});
    });
</script>
	<div class="col-sm-9 main">
	<div class="container">
		<div class="row">

			<div class="col-sm-4">
				<div class="profile text-center">

					<figure class="effect-oscar">
						<img src="https://openminds.swissre.com/static//images/profile-default.png" alt="img08"/>
						<figcaption>
							<p>Cambia tu foto</p>
							<a href="#">View more</a>
						</figcaption>			
					</figure>

				</div>
			</div>

			<div class="col-sm-8">
				<div class="profile-forms">
					<!-- Nav tabs -->
					<ul class="nav nav-tabs" role="tablist">
					  <li class="active passive"><a href="#event" role="tab" data-toggle="tab">Evento</a></li>
					  <li class="passive"><a href="#company" role="tab" data-toggle="tab">Organización</a></li>
					  <li class="passive"><a href="#user" role="tab" data-toggle="tab">Usuario</a></li>

					</ul>

					<!-- Tab panes -->
					<div class="tab-content">

					  <div class="tab-pane active" id="event">
					  	<div class="row">
					  		<div class="col-sm-12">
					  			<form class="form-horizontal" action="." method="post" id="event_form">
					  				{% csrf_token %}
					  				<div class="col-sm-12">
					  					<div class="form-group">
					  						<label class="col-sm-2 control-label">Titulo</label> 
							                <div class="col-sm-10">
							                   {{event_form.name}}
							                </div>
					  					</div>
					  					<div class="form-group">
					  						<label class="col-sm-2 control-label">Descripcion</label> 
							                <div class="col-sm-10">
							                   {{event_form.description}}
							                </div>
					  					</div>
					  				</div>
					  				<div class="col-sm-6">
					  					<div class="form-group">
						  					<label class="col-sm-4 control-label">Inicia</label> 
							                <div class="col-sm-8">
								                <div class="input-group">
				  									{{event_form.from_date}}
				  									<div class="input-group-addon"><i class="fa fa-calendar"></i></div>
				  								</div>
							                </div>
						                </div>
					  				</div>
					  				<div class="col-sm-6">
					  					<div class="form-group">
						  					<label class="col-sm-4 control-label">Inicia</label> 
							                <div class="col-sm-8">
								                <div class="input-group">
				  									{{event_form.to_date}}
				  									<div class="input-group-addon"><i class="fa fa-calendar"></i></div>
				  								</div>
							                </div>
						                </div>
					  				</div>
									<div class="col-sm-12">
							        	<button type="submit" class="btn btn-primary pull-right" id="submit_event">Enviar</button>
							        </div>

					  			</form>
					  		</div>
					  	</div>
					  </div>

					  <div class="tab-pane" id="company">
					  	<div class="row">
					  		<div class="col-sm-12">
					  			<form class="form-horizontal" action="." method="post">
					  			{% csrf_token %}
					  				<div class="col-sm-6">
                        {{ organization_form.errors }}
								  		<div class="form-group">
							                <label class="col-sm-4 control-label">Nombre</label>
							                <div class="col-sm-8">
							                   {{organization_form.name}}
							                </div>
							            </div>
							        </div><!-- col-sm-6 -->
							        <div class="col-sm-6">
								  		<div class="form-group">
							                <label class="col-sm-4 control-label">Web</label>
							                <div class="col-sm-8">
							                   {{organization_form.url}}
							                </div>
							            </div>
							        </div><!-- col-sm-6 -->
						
							        <div class="col-sm-6">
								  		<div class="form-group">
							                <label class="col-sm-4 control-label">Provincia</label>
							                <div class="col-sm-8">
							                  {{organization_form.province}}
							                </div>
							            </div>
							        </div><!-- col-sm-6 -->
							        <div class="col-sm-6">
								  		<div class="form-group">
							                <label class="col-sm-4 control-label">Teléfono</label>
							                <div class="col-sm-8">
							                  {{organization_form.phone}}
							                </div>
							            </div>
							        </div><!-- col-sm-6 -->
							       	<div class="col-sm-12">
						
								  		<div class="form-group">
							                <label class="col-sm-2 control-label">Dirección</label>
							                <div class="col-sm-10">
							                  {{organization_form.address}}
							                </div>
							            </div>

							            <div class="form-group">
							                <label class="col-sm-2 control-label">Descripción</label>
							                <div class="col-sm-10">
							                  {{organization_form.description}}
							                </div>
							            </div>

                          <div class="form-group">
							                <label class="col-sm-2 control-label">Categorias</label>
							                <div class="col-sm-10">
							                  {{organization_form.categories}}
							                </div>
							            </div>

							        </div><!-- col-sm-12 -->
							        <div class="col-sm-12">
							        	<button type="submit" class="btn btn-primary pull-right">Enviar</button>
							        </div>
							 	</form>
					  		</div>
						
					  	</div><!-- row -->


					  </div><!-- #company -->
					  <div class="tab-pane" id="user">
					  	<div class="row">
					  		<div class="col-sm-12">
					  			<form class="form-horizontal" action="." method="post">
					  			{% csrf_token %}
					  				<div class="col-sm-6">
								  		<div class="form-group">
							                <label class="col-sm-4 control-label">Nombre</label> 
							                <div class="col-sm-8">
							                   {{user_form.full_name}}
							                </div>
							            </div>
							        </div><!-- col-sm-6 -->
							        <div class="col-sm-6">
								  		<div class="form-group">
							                <label class="col-sm-4 control-label">Email</label> 
							                <div class="col-sm-8">
							                   {{user_form.email}}
							                </div>
							            </div>
							        </div><!-- col-sm-6 -->
							        <div class="col-sm-12">
							        	<button type="submit" class="btn btn-primary pull-right">Enviar</button>
							        </div>
							    </form>
							</div>
						</div>
					  </div>
					
					</div><!-- tab-content -->
				</div><!-- profile-forms -->
			</div><!-- col-sm-8 -->
		</div><!-- row -->
		

		<div class="row">
	  		<div class="col-sm-12">
	  			<div class="events-table">
		  			<table class="table" id="events-table" data-toggle="table" data-sort-name="starts" data-sort-order="desc" data-search="true" data-pagination="true" data-click-to-select="true">
		  				<thead>
			  				<tr>
			  					<th data-field="state" data-checkbox="true"></th>
			  					<th data-field="title" data-sortable="true">Título</th>
			  					<th data-field="description">Descripción</th>
			  					<th data-field="starts" data-sortable="true">Inicia</th>
			  					<th data-field="ends" data-sortable="true">Termina</th>
			  				</tr>
		  				</thead>
		  				<tbody>
               {% if events %}
                   {% for event in events %}
		      					<tr>
		  	    					<td></td>
                      <td>{{ event.name }}</td>
                      <td>{{ event.description }}</td>
                      <td>{{ event.from_date }}</td>
                      <td>{{ event.to_date }}</td>
		  				    	</tr>
                    {% endfor %}
                {% else %}
                    <tr>
                      <td colspan="5" style="text-align: center;">No has creado ningun evento aun</td>
                    </tr>
                {% endif %}
		  				</tbody>
		  			</table>
	  			</div>
	  		</div>	
	  	</div>

	</div><!-- container -->
	</div>
  <script tpe="text/javascript">
    var link = $('#submit_event');

    link.click(
          function(event){
              //eliminate the default function
              event.preventDefault();
              $.ajax({
                url: '/event_creation/{{ request.user.organization.id }}/',
                  data:  $('#event_form').serialize(),
                  type: "POST",
                  success:
                      function(result){
                        $('#event_form').trigger('reset');
                      },
                  error:
                      function(xhr){
                          $('#alert-red').removeClass('hidden');
                          $('#alert-green').addClass('hidden');
                      }
              });
      });
  </script>
{% endblock content %}

