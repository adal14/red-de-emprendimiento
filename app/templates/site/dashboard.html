
{% extends "base.html" %}

{% load staticfiles %}

{% block extra_css %}
<link rel="stylesheet" href="{{ STATIC_URL }}/css/chosen.css">
<link rel="stylesheet" href="{{ STATIC_URL }}/datepicker/datepicker3.css">
{% endblock extra_css %}

{% block content %}

  <div class="container">
     <div class="row">
       <div class="col-sm-12">
          <h1>Dashboard</h1>
        </div><!-- /col-sm-12 -->
        <div class="col-sm-12">
          
        </div>
    </div><!-- /row -->
    <div class="row">
      <div class="col-sm-12 ">
        <div class="dashboard-tabs">
          <div role="tabpanel" >
            <ul class="nav nav-tabs" role="tablist">
              <li role="presentation" class="active">
                <a href="#perfil" aria-controls="home" role="tab" data-toggle="tab">Perfil</a>
              </li>            
              <li role="presentation">
                <a href="#events" aria-controls="events" role="tab" data-toggle="tab">Eventos</a>
              </li>
              <li role="presentation">
                <a href="#change-password" aria-controls="change-password" role="tab" data-toggle="tab">Cambiar contrase&ntilde;a</a>
              </li>
            </ul>

          <div class="tab-content">
            <div role="tabpanel" class="tab-pane active" id="perfil">
              <div class="change-profile">
              <div class="row">
                <div class="col-sm-4">

                  <form action="/accounts/picture/" method="POST" enctype="multipart/form-data" id="id_picture_form">
                  {% csrf_token %}
   
                    <div id="id_user_pic" class="center-block">
         
                        {% if organization.logo %}
                            <img src="{{ organization.logo.url }}" >
                        {% else %}
                            <img src="{{ STATIC_URL }}img/companies/default.jpg">
                        {% endif %}
 
 
                        <div id="camera">
                          <i class="fa fa-camera"></i>
                        </div>
                    </div>
 
                  <div id="picture-hidden">
                    {{ organization_picture_form.picture }}
                  </div>
 
                 </form>
                </div><!-- /col -->

                <div class="col-sm-8">
                  <form class="form-horizontal" action="." method="POST">
                  {% csrf_token %}
                    <div class="col-sm-5">
                      <div class="form-group">
                        <label class="col-sm-3 control-label">Nombre</label>
                        <div class="col-sm-9">
                          {{ organization_form.name }}
                        </div>
                      </div>
                      <div class="form-group">
                        <label class="col-sm-3 control-label">Tel&eacute;fono</label>
                        <div class="col-sm-9">
                          {{ organization_form.phone }}
                        </div>
                      </div>
                      <div class="form-group">
                        <label class="col-sm-3 control-label">Web</label>
                        <div class="col-sm-9">
                          {{ organization_form.url }}
                        </div>
                      </div>
                    </div>
                    <div class="col-sm-7">
                      <div class="form-group">
                        <label class="col-sm-3 control-label">Direcci&oacute;n</label>
                        <div class="col-sm-9">
                          {{ organization_form.address }}
                        </div>
                      </div>
                      <div class="form-group">
                        <label class="col-sm-3 control-label">Provincia</label>
                        <div class="col-sm-9">
                          {{ organization_form.province }}
                        </div>
                      </div>
                      <div class="form-group">
                        <label class="col-sm-3 control-label">Categor&iacute;as</label>
                        <div class="col-sm-9">
                          {{ organization_form.categories }}
                        </div>
                      </div>
                    </div><!-- /col-sm -->
                    <div class="col-sm-12">
                      <label class=" control-label">Descripci&oacute;n</label>
                      {{ organization_form.description }}
                       <button class="btn btn-success pull-right" type="submit">Actualizar</button>
                    </div>

                  </form>
                </div><!-- /col-sm -->
              </div><!-- /row -->
                
              </div><!-- /change-profile -->
            </div><!-- /tab-panel -->
            <div role="tabpanel" class="tab-pane" id="events">
              <div class="row">
                <div class="col-sm-12">
                  <form class="form-horizontal" action="/accounts/create_event/" method="POST">
                    <div class="row">
                      <div class="col-sm-6">
                        <div class="col-sm-12">
                          <div class="form-group">
                            <label class="control-label col-sm-2">T&iacute;tulo</label>
                            <div class="col-sm-10">
                              {{ event_form.name }}
                            </div><!-- /col-sm -->
                          </div><!-- /form-group -->
                        </div><!-- /col-sm -->
                        
                        <div class="col-sm-12">
                          <div class="form-group">
                            <label class="control-label col-sm-2">Categor&iacute;as</label>
                            <div class="col-sm-10">
                                {{ event_form.categories }}
                            </div><!-- /col-sm -->
                          </div><!-- /form-group -->
                        </div><!-- /col-sm -->

                        <div class="col-sm-6">

                        <div class="form-group">
                            <label class="control-label col-sm-4">Inicio</label>
                            <div class="col-sm-8">
                                {{ event_form.from_date }}
                            </div><!-- /col-sm -->
                        </div><!-- /form-group -->

                      </div>

                      <div class="col-sm-6">

                        <div class="form-group">
                            <label class="control-label col-sm-3">T&eacute;rmino</label>
                            <div class="col-sm-9">
                                {{ event_form.to_date }}
                            </div><!-- /col-sm -->
                        </div><!-- /form-group -->

                      </div>

                      <div class="col-sm-6">

                        <div class="form-group">
                            <label class="control-label col-sm-4">Costo</label>
                            <div class="col-sm-8">
                                {{ event_form.cost }}
                            </div><!-- /col-sm -->
                        </div><!-- /form-group -->

                      </div>

                      <div class="col-sm-6">

                        <div class="form-group">
                            <label class="control-label col-sm-3">Web</label>
                            <div class="col-sm-9">
                                {{ event_form.url }}
                            </div><!-- /col-sm -->
                        </div><!-- /form-group -->

                      </div>


                    </div><!-- /col-sm -->
                    <div class="col-sm-6">
                      <label>Descripci&oacute;n</label>
                          {{ event_form.description }}
                    </div>

                    <div class="col-sm-12">
                      <button class="btn btn-primary pull-right" type="submit">Enviar</button>
                    </div>

                    </div><!-- /row -->

                    
                    </form>

                    </div><!-- /col-sm -->
               
                </div><!-- /row-->

                <div class="row">

              <div class="col-sm-12">
                {% if organization.events %}
                  <table class="table">
                    <tr>
                      <th>Categoría</th>
                      <th>Título</th>
                      <th>Fecha</th>
                      <th>Precio</th>
                    </tr>
                    <tr>
                      <td>Taller</td>
                      <td>Creatividad y oportunidad de negocios</td>
                      <td>18 Marzo 2015</td>
                      <td>Gratis</td>
                    </tr>
                    <tr>
                      <td>Curso</td>
                      <td>Actitud emprendedora y plan de vida</td>
                      <td>9 de Abril 2015</td>
                      <td>RD$200</td>
                    </tr>
                  </table>
                  {% else %}
                  <div class="events-empty text-center">
                    <p>No hay eventos</p>
                    <a href="" class="btn btn-primary">Crear evento</a>
                  </div>
                  {% endif %}
                </div>

                </div>
              </div>
            </div><!-- /tab-panel -->
            <div role="tabpanel" class="tab-panel" id="change-password">
              
            </div><!-- /tab-panel -->
          </div><!-- /tab-content -->

        </div><!-- /tabpanel -->
      </div><!-- /dashboard-tabs -->
        
    </div><!-- /col-sm-12 -->
  </div><!-- /row -->
</div><!-- /container -->

{% endblock content %}

{% block extra_js %}
  <script type="text/javascript" src="{{ STATIC_URL }}/js/chosen.jquery.js"></script>
  <script type="text/javascript" src="{{ STATIC_URL }}/datepicker/bootstrap-datepicker.js"></script>
  <script type="text/javascript" src="{{ STATIC_URL }}/datepicker/bootstrap-datepicker.es.js"></script>
  <script>
  {# Here goes the code for using the categories as a selectpicker#}
  $(document).ready(function(){
    $('.event-category, .organization-category').chosen(
      {
        width:'100%',
      }
    );
  });
  </script>

  <script type="text/javascript">
  $('#id_from_date, #id_to_date').datepicker({
      format: "dd/mm/yy",
      language: "es",
      todayHighlight: true
    });
  </script>
{% endblock extra_js %}
